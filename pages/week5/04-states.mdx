import { Callout } from "nextra-theme-docs";

# States

# Functions Review

ì»´í¬ë„ŒíŠ¸ì— ëŒ€í•´ ë” ê¹Šì´ ì´í•´í•˜ê¸° ìœ„í•´ì„œëŠ” í•¨ìˆ˜ì— ëŒ€í•œ ì´í•´ê°€ ìš°ì„ ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.

í•¨ìˆ˜ì— ëŒ€í•´ ë‹¤ì‹œ í•œë²ˆ ìƒê°í•´ë´…ì‹œë‹¤.

```jsx
// size ë©”ì†Œë“œ ì™¸ì˜ ê¸°ëŠ¥ì— ëŒ€í•œ ìì„¸í•œ ì½”ë“œëŠ” ìƒëµí•©ë‹ˆë‹¤.
class LinkedList {
  add(value) {
    let newNode = new Node(value);

    if (!this.head) {
      this.head = newNode;
      return this.head;
    }

    let tail = this.head;

    while (tail.next !== null) {
      tail = tail.next;
    }

    tail.next = newNode;

    return this.head;
  }

  size() {
    let count = 0;
    let node = this.head;

    while (node) {
      count++;
      node = node.next;
    }

    return count;
  }
}

const PEOPLE = ["Huh", "Kim", "Hwang", "Jung", "Min"];
const linkedList = new LinkedList();

PEOPLE.forEach((person) => linkedList.add(person));

const result = linkedList.size();
console.log(result);
```

## Local Variables

ì§€ì—­ ë³€ìˆ˜ë€ ë¬´ì—‡ì´ê³ , ì–´ë–¤ ê²½ìš°ì— ì‚¬ìš©í•˜ë‚˜ìš”? ìœ„ ì˜ˆì œì—ì„œ êµ¬í˜„ëœ `size` í•¨ìˆ˜ë¥¼ ì‚´í´ë³´ì„¸ìš”.

`node` ë¼ëŠ” ë³€ìˆ˜ë¥¼ ë§Œë“¤ì–´ ì‚¬ìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤. í•¨ìˆ˜ ì—°ì‚°ê³¼ì •ì—ì„œ `node` ë³€ìˆ˜ì— ì„ì‹œì ìœ¼ë¡œ ê°’ì„ ì €ì¥í•˜ê³  ì§€ì†ì ìœ¼ë¡œ ìˆ˜ì •í•˜ë©°, í•¨ìˆ˜ ë¡œì§ì˜ ìƒíƒœë¥¼ ê´€ë¦¬í•˜ê³  ìˆìŠµë‹ˆë‹¤.

## States

_Reactì˜ StateëŠ” í•¨ìˆ˜ì—ì„œì˜ ì§€ì—­ë³€ìˆ˜ì™€ ë™ì¼í•œ ê°œë…ì…ë‹ˆë‹¤._

ìƒí™©ì— ë”°ë¼ ê°€ë³€ì ì¸ ì •ë³´ì™€ UIê°€ ì—°ê´€ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŸ° ê°€ë³€ì ì¸ ì •ë³´ë¥¼ ìƒíƒœë¼ ë¶€ë¥´ê³ , ì´ ìƒíƒœë¥¼ ê´€ë¦¬í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì´ ë°”ë¡œ `state` ì…ë‹ˆë‹¤.

**âœ…Â *UI ë Œë”ë§ ê²°ê³¼ì™€ ì—°ê´€ë˜ëŠ” ë°ì´í„°ê°€ ì•„ë‹ˆë¼ë©´, stateë¡œ ê´€ë¦¬í•  í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤.***

_Classë¥¼ ì´ìš©í•œ React ì‚¬ìš©ë²•ì€ ë‹¹ì¥ ì£¼ìš”í•˜ê²Œ ë³¼ í•„ìš”ëŠ” ì—†ìŠµë‹ˆë‹¤. ë‚˜ì¤‘ì—ëŠ” í•œë²ˆì¯¤ ê¼­ ì‚´í´ë³´ì…”ì•¼ í•©ë‹ˆë‹¤._

ì•„ë˜ì™€ ê°™ì€ ì»´í¬ë„ŒíŠ¸ê°€ ìˆë‹¤ê³  ìƒê°í•´ë³´ì„¸ìš”.

```jsx
export default function ShoppingItem(props) {
  const { name, price } = props.item;

  return (
    <div>
      <h3>{name}</h3>
      <h4>{price}ì›</h4>
      <div>
        <div>-</div>
        <div>1</div>
        <div>+</div>
      </div>
    </div>
  );
}
```

ì‚¬ìš©ìê°€ ë”í•˜ê¸°, ë¹¼ê¸° ë²„íŠ¼ì„ í´ë¦­í• ë•Œë§ˆë‹¤ ìš°ë¦¬ëŠ” ìˆ˜ëŸ‰ì˜ ê°’ì„ ë³€ê²½ì‹œì¼œ UIì— ë°˜ì˜í•˜ê³  ì‹¶ìŠµë‹ˆë‹¤. ì´ì™€ ê°™ì€ ìƒí™©ì—ì„œ ìš°ë¦¬ëŠ” React Stateë¥¼ ì´ìš©í•˜ì—¬ ê°€ë³€ì ì¸ ìˆ˜ëŸ‰ì„ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. React Stateë¥¼ ìƒì„±í• ë•Œ ì‚¬ìš©ë˜ëŠ” `useState`ë¥¼ ì´ìš©í•˜ì—¬ ìˆ˜ëŸ‰ ê´€ë¦¬ë¥¼ ì ìš©ì‹œì¼œ ë³´ê² ìŠµë‹ˆë‹¤.

**ğŸ“– _Component State_**

[ì»´í¬ë„ŒíŠ¸ State - React](https://ko.reactjs.org/docs/faq-state.html#what-is-the-difference-between-state-and-props)

**ğŸ“– _Props vs State_**

[uberVU/react-guide](https://github.com/uberVU/react-guide/blob/master/props-vs-state.md)

```jsx
export default function ShoppingItem(props) {
  const { name, price } = props.item;
  const [quantity, setQuantity] = useState(1);

  return (
    <div>
      <h3>{name}</h3>
      <h4>{price}ì›</h4>
      <div>
        <div>-</div>
        <div>{quantity}</div>
        <div>+</div>
      </div>
    </div>
  );
}
```

ìœ„ ì˜ˆì œì— ì‚¬ìš©ìê°€ ë”í•˜ê¸°, ë¹¼ê¸° ë²„íŠ¼ì„ í´ë¦­í• ë•Œë§ˆë‹¤ í•´ë‹¹ ìˆ˜ëŸ‰ì„ ë³€ê²½í•˜ëŠ” ì½”ë“œë¥¼ ì¶”ê°€í•´ë³´ë©´ ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.

```jsx
export default function ShoppingItem(props) {
  const { name, price } = props.item;
  const [quantity, setQuantity] = useState(1);

  function changeQuantity(qty) {
    setQuantity(quantity + qty);
  }

  return (
    <div>
      <h3>{name}</h3>
      <h4>{price}ì›</h4>
      <div>
        <div onClick={() => changeQuantity(-1)}>-</div>
        <div>{quantity}</div>
        <div onClick={() => changeQuantity(1)}>+</div>
      </div>
    </div>
  );
}
```

**ğŸ–¥ _Example Link_**

[react-states](https://codesandbox.io/s/react-states-0imyk)

**ğŸ“– _useState_**

[Hooks API Reference - React](https://ko.reactjs.org/docs/hooks-reference.html#usestate)

**ğŸ“– _Handling Events_**

[ì´ë²¤íŠ¸ ì²˜ë¦¬í•˜ê¸° - React](https://ko.reactjs.org/docs/handling-events.html)

**ğŸ“–Â  _Synthetic Event_**

[í•©ì„± ì´ë²¤íŠ¸(SyntheticEvent) - React](https://ko.reactjs.org/docs/events.html#gatsby-focus-wrapper)

ìˆ˜ëŸ‰ì„ ì¡°ì ˆí•˜ëŠ” ë¡œì§ì€ ìš°ë¦¬ê°€ ì›í•˜ëŠ”ëŒ€ë¡œ êµ¬ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë§Œì•½ 0 ì´í•˜ì˜ ìˆ˜ëŸ‰ì€ í—ˆìš©í•˜ì§€ ì•Šê³  ì‹¶ë‹¤ë©´ ì•„ë˜ì™€ ê°™ì´ ì‘ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```jsx
export default function ShoppingItem(props) {
  const { name, price } = props.item;
  const [quantity, setQuantity] = useState(1);

  function changeQuantity(qty) {
    const quantitySum = quantity + qty;

    if (quantitySum < 0) return;

    setQuantity(quantitySum);
  }

  return (
    <div>
      <h3>{name}</h3>
      <h4>{price}ì›</h4>
      <div>
        <div onClick={() => changeQuantity(-1)}>-</div>
        <div>{quantity}</div>
        <div onClick={() => changeQuantity(1)}>+</div>
      </div>
    </div>
  );
}
```

ìš°ë¦¬ëŠ” ìš°ë¦¬ê°€ ì›í•˜ëŠ” ë§Œí¼ ë‹¤ì–‘í•œ `state` ê°’ì„ ë§Œë“¤ì–´ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì•„ë˜ ì½”ë“œì—ì„œëŠ” && ì—°ì‚°ìë¥¼ ì´ìš©í•˜ì—¬ ì¡°ê±´ì— ë”°ë¼ ë³´ì—¬ì£¼ê±°ë‚˜ ìˆ¨ê²¨ì£¼ëŠ” ë¡œì§ì„ ì‘ì„±í–ˆìŠµë‹ˆë‹¤.

<aside>
ğŸ“Œ ìƒíƒœ(State)ëŠ” ë°˜ë“œì‹œ UIì— ë³´ì—¬ì§€ëŠ” ë‚´ìš©ê³¼ ì—°ê´€ëœ ë°ì´í„°ì´ì–´ì•¼ í•©ë‹ˆë‹¤.

</aside>

```jsx
export default function ShoppingItem(props) {
  const { name, price } = props.item;
  const [quantity, setQuantity] = useState(1);
  const [error, setError] = useState("");

  function changeQuantity(qty) {
    if (quantity <= 0 && qty === -1) {
      setError("ìˆ˜ëŸ‰ì€ 0 ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.");
      return;
    }

    setQuantity(quantity + qty);
  }

  return (
    <div>
      {error && <p>{error}</p>}
      <h3>{name}</h3>
      <h4>{price}ì›</h4>
      <div>
        <div onClick={() => changeQuantity(-1)}>-</div>
        <div>{quantity}</div>
        <div onClick={() => changeQuantity(1)}>+</div>
      </div>
    </div>
  );
}
```

**ğŸ“– _Conditional Rendering_**

[ì¡°ê±´ë¶€ ë Œë”ë§ - React](https://ko.reactjs.org/docs/conditional-rendering.html)

## âš¡ï¸ setState í˜¸ì¶œì€ ë¹„ë™ê¸°ë¡œ ë™ì‘í•©ë‹ˆë‹¤.

_Calls to setState are asynchronous_

[async-setState](https://codesandbox.io/s/async-setstate-yr9y2)

[ì»´í¬ë„ŒíŠ¸ State - React](https://ko.reactjs.org/docs/faq-state.html#why-is-setstate-giving-me-the-wrong-value)

## â–¶ï¸ ìƒíƒœ ë³€í™”ì— ëŒ€í•´ ReactëŠ” ì–´ë–»ê²Œ ëŒ€ì‘í• ê¹Œìš”?

**_React re-renders the whole app on every update._**

_The key design decision that makes React awesome._

_When the data changes, React re-renders the entire component._

_That is, React components are basically just **idempotent functions**._

_They describe your UI at any point in time._

"_Updating the whole app" when state changes seems **expensive** (not effective)?_

# Virtual DOM

### Goal

_Makes re-rendering on every change **fast**._

### What if we throw out the DOM and rebuild it on every update?

_It's too slow and you will lose form state and scroll position._

### So React team built a **virtual DOM** and **events system**.

_Optimized for performance and memory footprint._

### On every update,

1. _React builds a new virtual DOM subtree._
2. _Compare it with the old virtual DOM subtree._
3. _Computes the minimal set of DOM mutations and puts them in a queue._
4. _Batch executes all updates. â†’ UI updates on browser._

### Reconciliation

[ì¬ì¡°ì • (Reconciliation) - React](https://ko.reactjs.org/docs/reconciliation.html)
