# 3. Side Effects

# Definition

**"Side Effect"ë€, ë¶€ì‘ìš©ì´ë¼ëŠ” ëœ»ì˜ ë‹¨ì–´ì…ë‹ˆë‹¤.** í”„ë¡œê·¸ë˜ë°ì—ì„œì˜ Side Effectë€, ì–´ë–¤ í•¨ìˆ˜ê°€ í•¨ìˆ˜ ì™¸ë¶€ì˜ ì •ë³´ì™€ ì˜í–¥ì„ ì£¼ê³  ë°›ëŠ” ì¼ì„ ì¼ì»«ìŠµë‹ˆë‹¤. Side Effectê°€ ì—†ëŠ” í•¨ìˆ˜ëŠ” ë³´í†µ Pure Function(ìˆœìˆ˜ í•¨ìˆ˜)ì…ë‹ˆë‹¤.

_Reactì—ì„œ Componentì˜ ì„ë¬´ëŠ” ë‹¨ í•œê°€ì§€ì…ë‹ˆë‹¤. UIë¥¼ ê·¸ë¦¬ëŠ” ê²ƒì…ë‹ˆë‹¤._

í•˜ì§€ë§Œ ë•Œë¡œëŠ” UIê°€ ì»´í¬ë„ŒíŠ¸ (React ì„¸ìƒ - root elementë¥¼ ê¸°ì¤€ìœ¼ë¡œ) ì™¸ë¶€ ì •ë³´ì— ì˜ì¡´í•˜ì—¬ ê·¸ë ¤ì§ˆ ë•Œê°€ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ë©´, ì„œë²„ë¡œ ìš”ì²­ì„ ë³´ë‚´ê³  ê·¸ì— ë”°ë¥¸ ì‘ë‹µì„ ë°›ì•„ì„œ UIì— ë³´ì—¬ì£¼ì–´ì•¼ í•˜ëŠ” ê²½ìš°ì…ë‹ˆë‹¤. ì´ì™€ ê°™ì€ ìƒí™©ì—ì„œ ì„œë²„ì™€ êµë¥˜í•˜ëŠ” ë„¤íŠ¸ì›Œí¬ ìš”ì²­ì€ React Component í•¨ìˆ˜ ì…ì¥ì—ì„œëŠ” Side Effectë¼ê³  í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ì™¸ì—ë„ êµ‰ì¥íˆ ë§ì€ ì¢…ë¥˜ì˜ Side Effectê°€ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**_ğŸ“– useEffect Hook_**

[Using the Effect Hook - React](https://ko.reactjs.org/docs/hooks-effect.html)

# **ì™¸ë¶€ ì •ë³´ êµ¬ë…í•˜ê¸°**

ìš”ì¦˜ ìˆ˜ ë§ì€ ì›¹ì‚¬ì´íŠ¸ë“¤ì€ ë°˜ì‘í˜•ìœ¼ë¡œ êµ¬ì¶•ë˜ì–´ ë§Œë“¤ì–´ì§‘ë‹ˆë‹¤. ê·¸ë¦¬ê³  Media Queryë¥¼ ì´ìš©í•˜ì—¬ ì†ì‰½ê²Œ íŠ¹ì • UIë¥¼ ìˆ¨ê¸°ê±°ë‚˜ ë³´ì—¬ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ë§Œì•½ì— ì„œë²„ë¡œ ìš”ì²­ì„ ë³´ë‚´ì•¼ í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ê°€ ìˆë‹¤ê³  ê°€ì •í•œë‹¤ë©´, Media QueryëŠ” í•´ë‹¹ UIë¥¼ í™”ë©´ì—ì„œ ìˆ¨ê²¨ì£¼ëŠ” ì—­í• ì„ í•  ìˆ˜ ìˆì§€ë§Œ ì„œë²„ë¡œ ìš”ì²­ì´ ë‚˜ê°€ëŠ” ìë°”ìŠ¤í¬ë¦½íŠ¸ ë¡œì§ì— ëŒ€í•œ ìƒëµê¹Œì§€ í•  ìˆ˜ëŠ” ì—†ìŠµë‹ˆë‹¤. ê·¸ë ‡ê¸° ë•Œë¬¸ì—, ë•Œë¡œëŠ” Media Queryê°€ ì•„ë‹Œ ìë°”ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì´ìš©í•˜ì—¬ ëŒ€ì²˜í•˜ëŠ” ê²ƒì´ ë” ë‚˜ì€ ë°©ë²•ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìë°”ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì´ìš©í•œë‹¤ë©´, ìš°ë¦¬ëŠ” UIì— ëŒ€í•œ ì œì–´ì™€ í•¨ê»˜ ìë°”ìŠ¤í¬ë¦½íŠ¸ ë¡œì§ì— ëŒ€í•œ ì œì–´ ë˜í•œ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```jsx
function Paragraph() {
  const mediaQueryList = window.matchMedia("(min-width: 800px)");
  const isWide = mediaQueryList.matches;

  return <p>I am {isWide ? "" : "not"} wide.</p>;
}
```

ìœ„ ì˜ˆì œì—ì„œëŠ” Side Effectê°€ ë°œìƒí•˜ê³  ìˆìŠµë‹ˆë‹¤. **React** ì…ì¥ì—ì„œëŠ” ì™¸ë¶€ ì •ë³´ì¸ ë¸Œë¼ìš°ì € í™”ë©´ ì‚¬ì´ì¦ˆ ì •ë³´ë¥¼ í† ëŒ€ë¡œ ì‘ì—…ì„ í•˜ê³  ìˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.

ê·¸ë¦¬ê³  ì´ Side EffectëŠ” `Paragraph`ê°€ (êµ³ì´ í•„ìš”í•˜ì§€ ì•Šì€ ìƒí™©ì´ ìˆì„ ìˆ˜ ìˆìŒì—ë„ ë¶ˆêµ¬í•˜ê³ ) ë§¤ë²ˆ ë‹¤ì‹œ ë Œë”ë§ ë  ë•Œë§ˆë‹¤ ì‹¤í–‰ë©ë‹ˆë‹¤. ë‹¤ì‹œ ë Œë”ë§ë˜ëŠ” ê³¼ì •ì€ `Paragraph` ì˜ ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ê°€ `Paragraph` ì»´í¬ë„ŒíŠ¸ë¥¼ ë‹¤ì‹œ ë Œë”ë§ ì‹œí‚¤ê±°ë‚˜, ë‹¤ë¥¸ `state` ê°’ì´ ë³€í–ˆì„ë•Œ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

í•˜ì§€ë§Œ `Paragraph` ì»´í¬ë„ŒíŠ¸ëŠ” í•œë²ˆ ë Œë”ë§ ëœ ì´í›„ì—ëŠ” ë¸Œë¼ìš°ì € ì‚¬ì´ì¦ˆê°€ ë³€í•˜ë”ë¼ë„ ë‹¤ì‹œ ë Œë”ë§ë˜ì§€ëŠ” ì•ŠìŠµë‹ˆë‹¤. ë¸Œë¼ìš°ì € ì‚¬ì´ì¦ˆ ë³€í™”ì— ëŒ€í•´ êµ¬ë…í•˜ê³  ë‹¤ì‹œ `Paragraph` ì»´í¬ë„ŒíŠ¸ë¥¼ ë‹¤ì‹œ ë Œë”ë§í•˜ëŠ” ë¡œì§ì´ ì—†ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.

```jsx
function Paragraph() {
  const mediaQueryList = window.matchMedia("(min-width: 800px)");

  // êµ¬ë…í•˜ê¸°
  mediaQueryList.addListener((ev) => {
    console.log(ev.matches);
  });

  const isWide = mediaQueryList.matches;

  return <p>I am {isWide ? "" : "not"} wide.</p>;
}
```

ìœ„ì²˜ëŸ¼ ìˆ˜ì •í–ˆì„ë•Œ, ì—¬ì „íˆ Side EffectëŠ” `Paragraph` ì»´í¬ë„ŒíŠ¸ê°€ ë‹¤ì‹œ ë Œë”ë§ë ë•Œë§ˆë‹¤ ì‹¤í–‰ë˜ê¸°ëŠ” í•˜ì§€ë§Œ, ì ì–´ë„ ìš°ë¦¬ëŠ” ë¸Œë¼ìš°ì €ì˜ ì‚¬ì´ì¦ˆ ë³€í™”ì— ëŒ€í•´ êµ¬ë…í•˜ê³  ìˆìŠµë‹ˆë‹¤. ìƒˆë¡œìš´ ì‚¬ì´ì¦ˆ ë³€í™”ì— ëŒ€í•œ ì •ë³´ë¥¼ ìš°ë¦¬ëŠ” ì–´ë–»ê²Œ ì €ì¥í•´ì•¼ í•˜ê³ , ì–´ë–»ê²Œ ê·¸ ì •ë³´ë¥¼ ì´ìš©í•´ UIì— ë°˜ì˜í•  ìˆ˜ ìˆì„ê¹Œìš”?

ë˜í•œ ë§¤ë²ˆ `Paragraph` ì»´í¬ë„ŒíŠ¸ê°€ ë‹¤ì‹œ ë Œë”ë§ë˜ëŠ” ê³¼ì •ì—ì„œ **ê³„ì† ìŒ“ì´ëŠ” êµ¬ë… ì‹ ì²­**ì€ ì–´ë–»ê²Œ ì²˜ë¦¬í•´ì•¼ í• ê¹Œìš”?

**ğŸ–¥ _Example Link_**

[Side Effect](https://codesandbox.io/s/side-effect-40tnz)

```jsx
function Paragraph() {
  const query = "(min-width: 800px)";
  const initialScreenState = window.matchMedia(query).matches;
  const [isWide, setIsWide] = useState(initialScreenState);

  useEffect(() => {
    const media = window.matchMedia(query);

    media.addListener(() => {
      setIsWide(media.matches);
    });
  }, []);

  // rendering..
}
```

ìœ„ì™€ ê°™ì´ ìˆ˜ì •í•¨ìœ¼ë¡œ í•´ì„œ ìš°ë¦¬ëŠ” **ì„¸ ê°€ì§€**ë¥¼ ì–»ì—ˆìŠµë‹ˆë‹¤.

1. Side EffectëŠ” ì»´í¬ë„ŒíŠ¸ê°€ ë‹¤ì‹œ ë Œë”ë§ë˜ëŠ” ê³¼ì •ì—ì„œ ë§¤ë²ˆ ì‹¤í–‰ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

2. êµ¬ë… ì‹ ì²­ì´ ìµœì´ˆ ë Œë”ë§ í•œë²ˆë§Œ ì‹¤í–‰ë©ë‹ˆë‹¤.

3. `isWide`ë¼ëŠ” ì •ë³´ë¥¼ ê´€ë¦¬í•˜ê³  ê·¸ê²ƒì„ ì´ìš©í•´ UIë¥¼ ê·¸ë¦´ ìˆ˜ ìˆê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.

**ğŸ–¥ _Example Link_**

[Side Effect 2](https://codesandbox.io/s/side-effect-2-my1br?file=/src/App.js)

í•˜ì§€ë§Œ ì—¬ì „íˆ ë¬¸ì œê°€ í•˜ë‚˜ ë‚¨ì•˜ìŠµë‹ˆë‹¤.

> _ìœ„ ì˜ˆì œ ë§í¬ì—ì„œ ì½˜ì†” ë©”ì‹œì§€ì˜ ê°¯ìˆ˜ê°€ ê¸°í•˜ê¸‰ìˆ˜ì ìœ¼ë¡œ ì¦ê°€í•˜ëŠ” í˜„ìƒì„ í™•ì¸í•˜ì…¨ê² ì£ ? í™•ì¸í•˜ì§€ ì•Šìœ¼ì…¨ë‹¤ë©´, ë‹¤ì‹œ ìœ„ ì˜ˆì œë¥¼ ì‹¤í–‰í•˜ì—¬ í™•ì¸í•´ë³´ì„¸ìš”._

ë§¤ë²ˆ `Paragraph` ì»´í¬ë„ŒíŠ¸ê°€ unmount -> re-mount ë˜ëŠ” ê³¼ì •ì—ì„œ ìš°ë¦¬ëŠ” listenerë¥¼ ë©”ëª¨ë¦¬ ìƒì— ë‚­ë¹„í•˜ê²Œ ë©ë‹ˆë‹¤. `addListener`ë¥¼ ì‹¤í–‰í–ˆë‹¤ë©´ `removeListener`ë¥¼ ì´ìš©í•˜ì—¬ ë’·ì •ë¦¬ë¥¼ í•´ì£¼ì–´ì•¼ í•˜ëŠ”ë°, **_ìƒˆë¡­ê²Œ ë§ˆìš´íŠ¸ë˜ëŠ” ê³¼ì •ì—ì„œ ìƒˆë¡œìš´ listenerë¥¼ ë“±ë¡í•˜ê¸°ë§Œ í• ë¿, unmountë˜ëŠ” ê³¼ì •ì—ì„œ ê¸°ì¡´ listenerì— ëŒ€í•œ ë’·ì •ë¦¬ë¥¼ í•˜ì§€ ì•Šê³  ìˆìŠµë‹ˆë‹¤._**

```jsx
useEffect(() => {
  const media = window.matchMedia(query);
  const listener = () => {
    setIsWide(media.matches);
  };

  media.addListener(listener);

  return function cleanup() {
    media.removeListener(listener);
  };
}, [isWide]); // useEffect now runs when `isWide` changes
```

ìœ„ ì˜ˆì œì™€ ê°™ì´ `useEffect` ë‚´ë¶€ì—ì„œ í•¨ìˆ˜(`cleanup`)ë¥¼ ë°˜í™˜í•˜ê²Œ ë˜ë©´ í•´ë‹¹ í•¨ìˆ˜ëŠ” ì»´í¬ë„ŒíŠ¸ì˜ Life Cycleì— ë§ì¶° ë’·ì •ë¦¬ ìš©ë„ë¡œ ì‚¬ìš©ë©ë‹ˆë‹¤.

**ğŸ–¥ _Example Link_**

[useEffect Cleanup](https://codesandbox.io/s/useeffect-cleanup-dd2yn?file=/src/App.js)

**ğŸ“– _useEffect_**

_ì´ˆë°˜ì— ì½ì–´ë³´ì…¨ë”ë¼ë„, ë‹¤ì‹œ í•œë²ˆ ì½ì–´ë³´ì„¸ìš”. íŠ¹íˆ effect ì •ë¦¬..!_

[Hooks API Reference - React](https://ko.reactjs.org/docs/hooks-reference.html#useeffect)

# Extra

[useEffect ì™„ë²½ ê°€ì´ë“œ](https://overreacted.io/ko/a-complete-guide-to-useeffect/)
