# 5. Data Flow in React

## Understanding the problem

ì•„ë˜ì™€ ê°™ì´ ë‘ ê°œì˜ í•¨ìˆ˜ê°€ ìˆìŠµë‹ˆë‹¤. 1ë²ˆ í•¨ìˆ˜(`processOne`)ì—ì„œ ì—°ì‚°ëœ ê°’ì„ 2ë²ˆ í•¨ìˆ˜(`processTwo`)ì—ì„œ í•„ìš”ë¡œ í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì–´ë–»ê²Œ ê³µìœ í•  ìˆ˜ ìˆì„ê¹Œìš”?

```jsx
function init() {
  function processOne() {
    const a = 1;
    const b = 2;

    // Want to share `result` value with `processTwo` function
    const result = a * b * 3;
  }

  function processTwo() {
    // Want to access `result` ğŸ§
    const finalResult = result * 2;
  }

  processOne();
  processTwo();
}
```

ìš°ì„  ê°€ì¥ ê°„ë‹¨í•œ ë°©ë²•ì€ `result` ë³€ìˆ˜ì˜ ì„ ì–¸ìœ„ì¹˜ë¥¼ ìƒìœ„ ìŠ¤ì½”í”„ë¡œ ì˜®ê¸°ëŠ” ê²ƒì…ë‹ˆë‹¤. ìƒìœ„ ìŠ¤ì½”í”„ì— ìˆëŠ” ê°’ì€ `processTwo` í•¨ìˆ˜ì—ì„œë„ ì ‘ê·¼ ê°€ëŠ¥í•˜ê¸° ë•Œë¬¸ì—, ìš°ë¦¬ê°€ ë‹¹ë©´í–ˆë˜ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```jsx
function init() {
  let result = null;

  function processOne() {
    const a = 1;
    const b = 2;

    result = a * b * 3;
  }

  function processTwo() {
    // We can access `result`..!! :)
    const finalResult = result * 2;
  }

  processOne();
  processTwo();
}
```

## Data flow in React Applications

ìœ„ì™€ ë¹„ìŠ·í•œ ìƒí™©ì„ ë¦¬ì•¡íŠ¸ì—ì„œ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.

```jsx
function App() {
  return (
    <>
      <Header />
      <SignupForm />
    </>
  );
}

function Header() {
  return (
    <header>
      <p>Current user is: {/* username */}</p>
    </header>
  );
}

function SignupForm() {
  const [username, setUsername] = useState("");

  function handleSubmit(ev) {
    ev.preventDefault();
    alert(`ì´ë¦„: ${username}`);
  }

  return (
    <form onSubmit={handleSubmit}>
      <input value={username} onChange={(ev) => setUsername(ev.target.value)} />
    </form>
  );
}
```

ìœ„ ì˜ˆì œì—ì„œ `Header` ì»´í¬ë„ŒíŠ¸ëŠ” `SignupForm` ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì—ì„œ ì—°ì‚°ë˜ëŠ” ì‚¬ìš©ì ì´ë¦„ì„ í•„ìš”ë¡œ í•˜ê³  ìˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ `Header` ì»´í¬ë„ŒíŠ¸ì—ì„œ `username` ê°’ì— ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì´ ì—†ìŠµë‹ˆë‹¤.

`App` ì»´í¬ë„ŒíŠ¸ì— ìƒˆë¡œìš´ ìƒíƒœë¥¼ ì„ ì–¸í•´ì£¼ê³  ë‘ ê°€ì§€ í•˜ìœ„ ì»´í¬ë„ŒíŠ¸ì—ì„œ ê³µìš©ìœ¼ë¡œ ì‚¬ìš©í•˜ë„ë¡ ì¬êµ¬ì„±í•´ë³´ê² ìŠµë‹ˆë‹¤.

```jsx
function App() {
  const [username, setUsername] = useState("");

  return (
    <>
      <Header username={username} />
      <SignupForm onSubmit={(value) => setUsername(value)} />
    </>
  );
}

function Header({ username }) {
  return (
    <header>
      <p>Current user is: {username}</p>
    </header>
  );
}

function SignupForm({ onSubmit }) {
  // ì´ ìƒíƒœëŠ” ë¬´ì—‡ì„ ìœ„í•œ ìƒíƒœì¼ê¹Œìš”?
  // ì™œ ì´ ìƒíƒœë¥¼ Appìœ¼ë¡œ ì˜®ê¸°ì§€ ì•Šê³ , Appì— ìƒˆë¡œìš´ ìƒíƒœë¥¼ ì„ ì–¸í•œ ê²ƒì¼ê¹Œìš”?
  const [username, setUsername] = useState("");

  function handleSubmit(ev) {
    ev.preventDefault();
    onSubmit(username);
  }

  return (
    <form onSubmit={handleSubmit}>
      <input value={username} onChange={(ev) => setUsername(ev.target.value)} />
    </form>
  );
}
```

## Conclusion

ìœ„ì—ì„œ ì‹œë„í•œ ë°©ë²•ì€ ë§ì€ ìƒí™©ì— ì ìš©ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì»´í¬ë„ŒíŠ¸ íŠ¸ë¦¬ êµ¬ì¡° ë‚´ì—ì„œ Sibling ê´€ê³„ë‚˜ ê·¸ì™€ ìœ ì‚¬í•œ ê´€ê³„ì— ìˆëŠ” ì»´í¬ë„ŒíŠ¸ ê°„ì— ë°ì´í„°ë¥¼ ê³µìœ í•´ì•¼ í•  ê²½ìš°, ìœ„ì™€ ê°™ì€ ë°©ë²•ìœ¼ë¡œ í•´ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**ğŸ“– _State ëŒì–´ì˜¬ë¦¬ê¸°_**

[State ëŒì–´ì˜¬ë¦¬ê¸° - React](https://ko.reactjs.org/docs/lifting-state-up.html)

**ğŸ“– _êµí›ˆ_**

> React ì• í”Œë¦¬ì¼€ì´ì…˜ ì•ˆì—ì„œ ë³€ê²½ì´ ì¼ì–´ë‚˜ëŠ” ë°ì´í„°ì— ëŒ€í•´ì„œëŠ” â€œ**ì§„ë¦¬ì˜ ì›ì²œ(source of truth)â€œ**ì„ í•˜ë‚˜ë§Œ ë‘ì–´ì•¼ í•©ë‹ˆë‹¤. ë³´í†µì˜ ê²½ìš°, stateëŠ” ë Œë”ë§ì— ê·¸ ê°’ì„ í•„ìš”ë¡œ í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ì— ë¨¼ì € ì¶”ê°€ë©ë‹ˆë‹¤. ê·¸ëŸ¬ê³  ë‚˜ì„œ ë‹¤ë¥¸ ì»´í¬ë„ŒíŠ¸ë„ ì—­ì‹œ ê·¸ ê°’ì´ í•„ìš”í•˜ê²Œ ë˜ë©´ ê·¸ ê°’ì„ ê·¸ë“¤ì˜ **ê°€ì¥ ê°€ê¹Œìš´ ê³µí†µ ì¡°ìƒ**ìœ¼ë¡œ ëŒì–´ì˜¬ë¦¬ë©´ ë©ë‹ˆë‹¤. ë‹¤ë¥¸ ì»´í¬ë„ŒíŠ¸ ê°„ì— ì¡´ì¬í•˜ëŠ” stateë¥¼ ë™ê¸°í™”ì‹œí‚¤ë ¤ê³  ë…¸ë ¥í•˜ëŠ” ëŒ€ì‹  **í•˜í–¥ì‹ ë°ì´í„° íë¦„**ì— ê¸°ëŒ€ëŠ” ê±¸ ì¶”ì²œí•©ë‹ˆë‹¤.

[State ëŒì–´ì˜¬ë¦¬ê¸° - React](https://ko.reactjs.org/docs/lifting-state-up.html#lessons-learned)
